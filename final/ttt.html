<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
    <title>小測驗</title>
    <meta http-equiv="content-type" content="txt/html; charset=utf-8" />
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <link rel="stylesheet" href="set.css">
    <!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	-->
</head>
<script language="javascript">
    function two_char(n) {
        return n >= 10 ? n : "0" + n;
    }

    function time_fun() {
        var sec = 0;
        setInterval(function() {
            sec++;
            var date = new Date(0, 0)
            date.setSeconds(sec);
            var h = date.getHours(),
                m = date.getMinutes(),
                s = date.getSeconds();
            document.getElementById("mytime").innerText = two_char(h) + ":" + two_char(m) + ":" + two_char(s);
        }, 1000);
    }

    function main() {
        var questionArray = new Array("Q1", "Q2", "Q3", "Q4", "Q5");
        var resultArray = new Array();
        var rightArray = new Array();

        //aryAns[]是從後端返回的陣列,當點選交卷的時候,向後端請求正確答案的陣列,賦值給aryAns[]即可;
        var aryAns = new Array(4, 3, 4, 3, 2); //建立儲存正確答案的陣列
        for (var i = 0; i < questionArray.length; i++) {
            if (Name(questionArray[i]) != 10) {
                resultArray[i] = Name(questionArray[i]);
            } else {
                alert("第" + (i + 1) + "題,您未作答!!");
                return false;
            }
        }
        var right_number = 0; //計算答對的題數；
        for (var i = 0; i < questionArray.length; i++) {
            if (aryAns[i] == resultArray[i]) {
                right_number++;
                rightArray[i] = 1;
            } else {
                rightArray[i] = 0;
            }
        }
        var right_question = " ";
        var error_question = " ";
        for (var i = 0; i < rightArray.length; i++) {
            if (rightArray[i] == 1) {
                right_question += i + 1 + ",";
            } else {
                error_question += i + 1 + ",";
            }
        }
        var time = document.getElementById("mytime").innerHTML;
        document.getElementById("right_number").innerText = right_number;
        document.getElementById("time").innerText = time;
        if (right_question != " ") {
            document.getElementById("right_question").innerText = right_question;

        }
        if (error_question != " ") {
            document.getElementById("error_question").innerText = error_question;

        }
    };

    function Name(name) {
        var temp = document.getElementsByName(name);
        var intHot = 9;
        for (var i = 0; i < temp.length; i++) {
            if (temp[i].checked)
                intHot = temp[i].value;
        }
        if (intHot == 9) {
            return 10;
        }
        return intHot;
    };
</script>

<body onload="time_fun()">
    <img src="background.JPG" width="100%" id="background">
    <button onclick="self.location.href='index.html'" id="test">首頁</button>
    <h2 font color="white">小測驗</h2>
    <h4 id="tp">總共十題，請根據圖片選出正確的名字</h4>
    <hr width="90%">
    <p id="top1">第一題</p>
    <img src="photo/三葉五家.png" alt="" id="q1" width="50%">
    <p id="q1">
        <input type="radio" name="Q1" value="1">三葉五家<br>
        <input type="radio" name="Q1" value="2">爪哇婆婆納<br>
        <input type="radio" name="Q1" value="3">大瓜垂草<br>
        <input type="radio" name="Q1" value="4">山菊<br>
    </p>

    <button onclick="javascript:main();" id="fin">交卷</button>
    <h3 id="result">
        五題中您一共答對了
        <font color="red"><span id="right_number"></font>題
        <br> 正確的題目有:
        <span id="right_question" style="color:red"></span>
            <br> 錯誤的題目有:
            <span id="error_question" style="color:red"></span>
    </h3>
</body>

</html>